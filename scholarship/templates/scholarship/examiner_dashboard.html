{% extends 'scholarship/base.html' %}

{% block title %}Dashboard Penguji{% endblock %}

{% block content %}
<div class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
    <div class="flex items-center">
        <div class="bg-blue-100 p-3 rounded-2xl mr-4 text-blue-600 shadow-sm transition-transform hover:rotate-6">
            <i class="fas fa-user-tie text-2xl"></i>
        </div>
        <div>
            <h2 class="text-3xl font-extrabold text-gray-900 tracking-tight">Dashboard Penguji</h2>
            <p class="text-gray-500 font-medium">
                Selamat datang, <span class="text-blue-600">{{ examiner.nama }}</span>
            </p>
        </div>
    </div>
    <div class="flex gap-4">
        <div class="bg-white px-6 py-3 rounded-2xl shadow-sm border border-gray-100 flex items-center">
            <div class="w-2 h-2 rounded-full bg-blue-500 mr-3 animate-pulse"></div>
            <div>
                <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Total Kelompok</p>
                <p class="text-lg font-black text-gray-800 leading-none mt-0.5">{{ groups.count }}</p>
            </div>
        </div>
    </div>
</div>

<div class="grid gap-8">
    {% for group in groups %}
    <div class="bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden transition-all hover:shadow-md">
        <div
            class="bg-gradient-to-r from-blue-700 to-blue-600 px-8 py-5 flex flex-col sm:flex-row justify-between items-center text-white gap-4">
            <div class="flex items-center">
                <i class="fas fa-users-rectangle text-xl mr-3 opacity-80"></i>
                <h3 class="text-xl font-bold tracking-tight">{{ group.nama_group }}</h3>
            </div>
            <div class="flex items-center gap-3">
                {% if group.whatsapp_link %}
                <a href="{{ group.whatsapp_link }}" target="_blank"
                    class="bg-white/10 hover:bg-white/20 px-4 py-1.5 rounded-full text-xs font-bold transition flex items-center border border-white/20">
                    <i class="fab fa-whatsapp mr-2 text-green-400"></i> WhatsApp
                </a>
                {% endif %}
                {% if group.gmeet_link %}
                <a href="{{ group.gmeet_link }}" target="_blank"
                    class="bg-white/10 hover:bg-white/20 px-4 py-1.5 rounded-full text-xs font-bold transition flex items-center border border-white/20">
                    <i class="fas fa-video mr-2 text-blue-300"></i> Google Meet
                </a>
                {% endif %}
            </div>
        </div>

        <div class="p-8">
            <div class="flex items-center mb-6">
                <i class="fas fa-list-ul text-gray-300 mr-2"></i>
                <h4 class="text-xs font-black text-gray-400 uppercase tracking-[0.2em]">Daftar Anggota Kelompok</h4>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-100">
                    <thead>
                        <tr>
                            <th
                                class="px-4 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">
                                Mahasiswa</th>
                            <th
                                class="px-4 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest">
                                Target Hafalan</th>
                            <th
                                class="px-4 py-4 text-center text-[10px] font-black text-gray-400 uppercase tracking-widest">
                                Aksi Penilaian</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-50">
                        {% for student in group.members.all %}
                        <tr class="group hover:bg-blue-50/30 transition-colors">
                            <td class="px-4 py-5 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div
                                        class="w-10 h-10 rounded-xl bg-gray-50 flex items-center justify-center mr-3 text-gray-400 font-bold border border-gray-100 transition-colors group-hover:bg-white group-hover:text-blue-500">
                                        {{ student.nama|slice:":1" }}
                                    </div>
                                    <div>
                                        <p class="text-sm font-bold text-gray-800">{{ student.nama }}</p>
                                        <p class="text-[10px] font-medium text-gray-400 tracking-wider">{{ student.nim
                                            }}</p>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-5 whitespace-nowrap">
                                <span
                                    class="px-3 py-1 rounded-full text-[10px] font-black bg-blue-50 text-blue-700 tracking-wider">
                                    {{ student.jumlah_hafalan }} JUZ
                                </span>
                            </td>
                            <td class="px-4 py-5 whitespace-nowrap text-center">
                                <a href="{% url 'evaluate_student' student.id %}"
                                    class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white text-[11px] font-black uppercase tracking-widest px-6 py-2.5 rounded-xl transition shadow-md hover:shadow-lg active:scale-95">
                                    <i class="fas fa-star-half-alt mr-2"></i> Beri Penilaian
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="bg-gray-50 rounded-3xl p-16 text-center border-2 border-dashed border-gray-200">
        <div class="bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm">
            <i class="fas fa-folder-open text-3xl text-gray-200"></i>
        </div>
        <h3 class="text-xl font-bold text-gray-800 mb-2">Belum Ada Kelompok</h3>
        <p class="text-gray-500 max-w-xs mx-auto">Anda belum ditugaskan ke kelompok manapun oleh Admin Panitia.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}